[Unit]
Description=Adaptive Disk Space Watchdog
Documentation=https://github.com/radrob/disk-watchdog
After=network.target local-fs.target

[Service]
Type=simple
ExecStart=/usr/local/bin/disk-watchdog
ExecReload=/bin/kill -HUP $MAINPID
Restart=always
RestartSec=10

# Systemd watchdog: if script doesn't respond in 60s, restart it
WatchdogSec=60

# Hardening
ProtectSystem=strict
ProtectHome=read-only
ReadWritePaths=/var/log /tmp /run /var/lib/disk-watchdog
NoNewPrivileges=false
PrivateTmp=true

[Install]
WantedBy=multi-user.target

# disk-watchdog configuration
# Copy to /etc/disk-watchdog.conf

# User whose processes to manage
# Leave empty (default) to monitor ALL users - safer, catches any runaway process
# Set to a username to only manage that user's processes
DISK_WATCHDOG_USER=

# Mount point to monitor (default: /)
DISK_WATCHDOG_MOUNT=/

# Log file location
DISK_WATCHDOG_LOG=/var/log/disk-watchdog.log

# Thresholds in GB (action when free space drops below)
# Set to "auto" (default) to auto-calculate based on disk size
# Upper thresholds scale with disk size (percentage-based)
# Lower thresholds are capped at safe maximums regardless of disk size
#
# Auto-calculated defaults:
#   Notice: 10% of disk (min 10GB)
#   Warn:   7% of disk (min 5GB)
#   Harsh:  4% of disk (min 3GB)
#   Pause:  2% of disk (max 30GB, min 2GB)
#   Stop:   1% of disk (max 15GB, min 1GB)
#   Kill:   0.5% of disk (max 5GB, min 1GB)
#
# Uncomment to override with fixed values:
# DISK_WATCHDOG_THRESH_NOTICE=150   # Log only
# DISK_WATCHDOG_THRESH_WARN=100     # Desktop notification
# DISK_WATCHDOG_THRESH_HARSH=50     # Urgent warning + wall
# DISK_WATCHDOG_THRESH_PAUSE=25     # SIGSTOP - pause processes (resumable)
# DISK_WATCHDOG_THRESH_STOP=10      # SIGTERM - graceful stop
# DISK_WATCHDOG_THRESH_KILL=5       # SIGKILL - force kill

# Smart mode: detect and stop actual heavy writers (recommended, default: true)
# If false, uses DISK_WATCHDOG_PROCS patterns instead
DISK_WATCHDOG_SMART=true

# biotop command (auto-detected, usually biotop-bpfcc or biotop)
# DISK_WATCHDOG_BIOTOP_CMD=biotop-bpfcc

# Enable desktop notifications (true/false)
DISK_WATCHDOG_DESKTOP=true

# Enable wall messages (true/false)
DISK_WATCHDOG_WALL=true

# Email notifications (requires mail, sendmail, or msmtp)
DISK_WATCHDOG_EMAIL=false
# DISK_WATCHDOG_EMAIL_TO=you@example.com

# Webhook notifications (Slack, Discord, ntfy.sh, or generic JSON POST)
# Supports: Slack webhooks, Discord webhooks, ntfy.sh, generic JSON
DISK_WATCHDOG_WEBHOOK=false
# DISK_WATCHDOG_WEBHOOK_URL=https://ntfy.sh/your-topic
# DISK_WATCHDOG_WEBHOOK_URL=https://hooks.slack.com/services/xxx
# DISK_WATCHDOG_WEBHOOK_URL=https://discord.com/api/webhooks/xxx

# Rate warning: alert if disk is filling faster than X GB/min
DISK_WATCHDOG_RATE_WARN=2

# Rate-aware escalation: escalate early if disk will fill in < X minutes
DISK_WATCHDOG_RATE_ESCALATE=10

# Notification cooldown in seconds (avoid spam)
DISK_WATCHDOG_NOTIFY_COOLDOWN=300
